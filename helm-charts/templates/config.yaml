apiVersion: v1
data:
  config.yaml: |
    redis:
      host: "{{ .Values.redis.host }}"
      port: {{ .Values.redis.port }}
      readTimeout: {{ .Values.redis.readTimeout }}
      dbs:
        traces: {{ .Values.redis.dbs.traces }}
        otel: {{ .Values.redis.dbs.otel }}
        scenarios: {{ .Values.redis.dbs.scenarios }}
    postgres:
      host: "{{ .Values.postgres.host }}"
      port: {{ .Values.postgres.port }}
      user: "{{ .Values.postgres.user }}"
      password: ""
      dbname: "{{ .Values.postgres.database }}"
      max_connections: 5
      max_idle_connections: 5
      connection_max_lifetime_in_minutes: 10
    server:
      host: 0.0.0.0
      port: 80
    scenarioConfig:
      redisRuleSetCount: 12
      processingIntervalInSeconds: 10
kind: ConfigMap
metadata:
  name: {{ include "zk-scenario-manager.fullname" . }}
  labels:
    app: {{ include "zk-scenario-manager.fullname" . }}
    name: {{ include "zk-scenario-manager.fullname" . }}
  namespace: zk-client
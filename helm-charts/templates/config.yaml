apiVersion: v1
data:
  config.yaml: |
    redis:
      port: {{ .Values.redis.port }}
      readTimeout: {{ .Values.redis.readTimeout }}
      dbs:
        filtered_traces: {{ .Values.redis.dbs.filtered_traces }}
        scenarios: {{ .Values.redis.dbs.scenarios }}
        traces: {{ .Values.redis.dbs.traces }}
        executor_attr: {{ .Values.redis.dbs.executor_attr }}
        pod_details: {{ .Values.redis.dbs.pod_details }}
        error_details: {{ .Values.redis.dbs.error_details }}
        resource_and_scope_attr: 5
    server:
      host: 0.0.0.0
      port: 80
    scenarioConfig:
      processingIntervalInSeconds: 10
    logs:
      color: {{ .Values.serviceConfigs.logs.color }}
      level: {{ .Values.serviceConfigs.logs.level }}
    workLoad:
      ttl: {{ .Values.workLoadTtl }}
      tickerDuration: {{ .Values.workLoadTickerDuration }}
    exporter:
      host: opentelemetry-collector.opentelemetry-operator-system.svc.cluster.local
      port: 4319
kind: ConfigMap
metadata:
  name: {{ include "zk-scenario-manager.fullname" . }}
  labels:
    app: {{ include "zk-scenario-manager.fullname" . }}
    name: {{ include "zk-scenario-manager.fullname" . }}
  namespace: zk-loadtest
---
apiVersion: v1
data:
  config.yaml: |+
    redis_obfuscation_rules_db: 10
    redis_obfuscation_rules_sync_interval: 30
    http_port: 9103
    logs_color: true
    logs_level: DEBUG
kind: ConfigMap
metadata:
  name: zk-obfuscator
  namespace: zk-loadtest